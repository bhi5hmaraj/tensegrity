digraph MultiModelComposition {
    rankdir=TB;
    node [shape=box, style="rounded,filled"];

    // Three types of composition
    subgraph cluster_monoidal {
        label="Monoidal Composition (Parallel)\nMâ‚ âŠ— Mâ‚‚";
        style=filled;
        fillcolor=lightgray;

        M1 [label="Physics\nð’³â‚ = T*ð’¬", fillcolor=lightcoral];
        M2 [label="Economics\nð’³â‚‚ = Î”â¿ Ã— â„â‚Šâ¿", fillcolor=lightgreen];
        Tensor [label="Mâ‚ âŠ— Mâ‚‚\nð’³ = ð’³â‚ Ã— ð’³â‚‚\nð’ª = ð’ªâ‚ âŠ— ð’ªâ‚‚", shape=ellipse, fillcolor=yellow];

        M1 -> Tensor;
        M2 -> Tensor;
    }

    subgraph cluster_sequential {
        label="Sequential Composition (Pipeline)\nMâ‚ â†’ Mâ‚‚ â†’ Mâ‚ƒ";
        style=filled;
        fillcolor=lightgray;

        Input [label="Problem State\nxâ‚€", shape=ellipse, fillcolor=white];
        Step1 [label="SysDyn\nDiagnose loops", fillcolor=lightyellow];
        Step2 [label="Physics\nIdentify modules", fillcolor=lightcoral];
        Step3 [label="Economics\nAllocate budget", fillcolor=lightgreen];
        Output [label="Solution\nx_final", shape=ellipse, fillcolor=white];

        Input -> Step1 -> Step2 -> Step3 -> Output;
    }

    subgraph cluster_hierarchical {
        label="Hierarchical Composition (Nested)\nÏ€â‚Š: M_inner â†’ M_outer";
        style=filled;
        fillcolor=lightgray;

        Outer [label="System Dynamics\n(Business level)\nRevenue, Customers", fillcolor=lightyellow];
        Inner [label="Physics\n(Software level)\nV_struct, H", fillcolor=lightcoral];

        Inner -> Outer [label="Ï€â‚Š: Pushforward\nCoarse-grain", style=bold];
    }

    Tensor -> Input [style=invis];
    Output -> Outer [style=invis];
}
